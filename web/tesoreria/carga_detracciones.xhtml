
<html  xmlns="http://www.w3.org/1999/xhtml"
     xmlns:h="http://java.sun.com/jsf/html"
     xmlns:f="http://java.sun.com/jsf/core"
     xmlns:ui="http://java.sun.com/jsf/facelets"
     xmlns:p="http://primefaces.org/ui"
     >


    <f:view>

        <ui:composition template="../#{applicationController.plan3}">
            <ui:define name="contenido">
                <div style="height: 10000px">
                    <h:form>  
                        <p:messages id="messages"/>  
                        
                        <p:panelGrid columns="3">
                            <p:outputLabel value="Periodo:"/>
                            <p:inputText value="#{detraController.periodo}" id="periodo"/>
                            <p:message for="periodo"/>
                            <p:outputLabel  value="Adquiriente:" />
                            <h:selectOneMenu id="menu" value="#{detraController.adq.id}">
                                <f:selectItems  value="#{detraController.adquirientes}" />
                            </h:selectOneMenu>
                            <p:message for="menu"/>
                        </p:panelGrid>
                        <br/>
                        <p:outputLabel value="Cargue el Archivo de Detracciones:"/>
                        <p:fileUpload fileUploadListener="#{detraController.cargar}" mode="advanced" dragDropSupport="false"  
                                       multiple="true" update="@form" sizeLimit="500000" fileLimit="1" allowTypes="/(\.|\/)(txt|csv)$/" />  

                        <br/>
                        
                        <p:contextMenu for="cars" widgetVar="cMenu">     
                            <p:menuitem value="Edit Cell" icon="ui-icon-search" onclick="PF('carsTable').showCellEditor();return false;"/>    
                            <p:menuitem value="Hide Menu" icon="ui-icon-close" onclick="PF('cMenu').hide()"/>    
                        </p:contextMenu>   

                        <p:dataTable id="cars" var="car" value="#{detraController.registros}" editable="true" editMode="cell" widgetVar="carsTable">  

                            <f:facet name="header">  
                                Detracciones  
                            </f:facet>  

                            <p:ajax event="cellEdit"  />  

                            <p:column headerText="Serie Factura" style="width:10%">  
                                   <p:cellEditor>  
                                       <f:facet name="output"><h:outputText value="#{car.serieFact}" /></f:facet>  
                                       <f:facet name="input"><p:inputText value="#{car.serieFact}" style="width:96%" maxlength="3"/></f:facet>  
                                   </p:cellEditor>  
                            </p:column> 
                            
                            <p:column headerText="No Correlativo Factura" style="width:10%">  
                                   <p:cellEditor>  
                                       <f:facet name="output"><h:outputText value="#{car.corFact}" /></f:facet>  
                                       <f:facet name="input"><p:inputText value="#{car.corFact}" style="width:96%" maxlength="6"/></f:facet>  
                                   </p:cellEditor>  
                            </p:column> 
                            
                            <p:column headerText="RUC Proveedor" style="width:10%">  
                                   <p:cellEditor>  
                                       <f:facet name="output"><h:outputText value="#{car.idProveedor.ruc}" /></f:facet>  
                                       <f:facet name="input"><p:inputText  value="#{car.idProveedor.ruc}" style="width:96%" maxlength="11"/></f:facet>  
                                   </p:cellEditor>  
                            </p:column>  
                            <p:column headerText="Proveedor" style="width:25%">  
                                   <p:cellEditor>  
                                       <f:facet name="output"><h:outputText value="#{car.idProveedor.razonSocial}" /></f:facet>  
                                       <f:facet name="input"><p:inputText  value="#{car.idProveedor.razonSocial}" style="width:96%"/></f:facet>  
                                   </p:cellEditor>  
                            </p:column> 

                            <p:column headerText="No Cuenta" style="width:10%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.idProveedor.noCuenta}" /></f:facet>  
                                    <f:facet name="input"><p:inputText value="#{car.idProveedor.noCuenta}" style="width:96%" maxlength="11"/></f:facet>  
                                </p:cellEditor>  
                            </p:column>  

                            <p:column headerText="Cod Servicio" style="width:10%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.codServicio}" /></f:facet>  
                                    <f:facet name="input"><p:inputText value="#{car.codServicio}" style="width:96%" maxlength="3"/></f:facet> 
                                </p:cellEditor>  
                            </p:column>  

                            <p:column headerText="Cod OperaciÃ³n" style="width:10%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.codOperacion}" /></f:facet>  
                                    <f:facet name="input"><p:inputText value="#{car.codOperacion}" style="width:96%" maxlength="2"/></f:facet>  
                                </p:cellEditor>  
                            </p:column>  
                            <p:column headerText="Importe" style="width:10%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.importe}" /></f:facet>  
                                    <f:facet name="input"><p:inputText value="#{car.importe}" style="width:96%"/></f:facet>  
                                </p:cellEditor>  
                            </p:column>
                            <p:column headerText="Periodo Tributario" style="width:10%">  
                                <p:cellEditor>  
                                    <f:facet name="output"><h:outputText value="#{car.periodoTributario}" /></f:facet>  
                                    <f:facet name="input"><p:inputText value="#{car.periodoTributario}" style="width:96%" maxlength="6"/></f:facet>  
                                </p:cellEditor>  
                            </p:column>  
                            <f:facet name="footer">
                                <p:commandButton action="#{detraController.cargarInfoBD}" value="Cargar" update="@form" rendered="#{not empty detraController.registros}"/>
                            </f:facet>
                        </p:dataTable> 
                          
                     </h:form>  
                </div>
            </ui:define>
        </ui:composition>
    </f:view>

</html>
